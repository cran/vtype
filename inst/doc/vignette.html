<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andreas Schulz" />


<title>Application example</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Application example</h1>
<h4 class="author">Andreas Schulz</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The purpose of the package is automatically detecting type of variables in not quality controlled data. The prediction is based on a pre-trained random forest model, trained on over 5000 medical variables with OOB accuracy of 99%. The accuracy depends heavily on the type and coding style of data. For example, often categorical variables are coded as integers 1 to x, if the number of categories is very large, there is no way to distinguish it from a continuous integer variable. Some types are per definition very sensitive to errors in data, like ID, missing or constant, where a single alternative non-missing value makes it not constant or not missing anymore. The data is assumed to be cross sectional, where ID is unique (no multiple entries per ID).</p>
<p>It can be used as a first step by data quality control to help sort the variables in advance and get some information about the possible formats.</p>
</div>
<div id="example-data-set" class="section level2">
<h2>Example data set</h2>
<p>The data set ‘sim_nqc_data’ contains 100 observations and 14 artificial variables with some not well formatted or missing values. The data is complete artificial and was not used for training or validation of the random forest model.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(sim_nqc_data, <span class="dv">20</span>), <span class="at">caption=</span><span class="st">&#39;Artificial not quality controlled data&#39;</span>)</span></code></pre></div>
<table>
<caption>Artificial not quality controlled data</caption>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="left">visit</th>
<th align="left">sex</th>
<th align="left">age</th>
<th align="left">byear</th>
<th align="left">decades</th>
<th align="left">bmi</th>
<th align="left">med</th>
<th align="left">date</th>
<th align="left">loct</th>
<th align="left">group</th>
<th align="left">crp</th>
<th align="left">bnp</th>
<th align="left">comms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">55</td>
<td align="left">1966</td>
<td align="left">55-64</td>
<td align="left">28</td>
<td align="left">0</td>
<td align="left">2016/12/03</td>
<td align="left">NA</td>
<td align="left">4</td>
<td align="left">1.78</td>
<td align="left">&gt;300</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">NULL</td>
<td align="left">Women</td>
<td align="left">NULL</td>
<td align="left">1979</td>
<td align="left">NULL</td>
<td align="left">NULL</td>
<td align="left">0</td>
<td align="left">2016-07-06</td>
<td align="left">NA</td>
<td align="left">NULL</td>
<td align="left">kM</td>
<td align="left">kM</td>
<td align="left">no material available</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">49</td>
<td align="left">1972</td>
<td align="left">45-54</td>
<td align="left">29</td>
<td align="left">0</td>
<td align="left">2015-09-16</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">2.002</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">73</td>
<td align="left">1948</td>
<td align="left">65-75</td>
<td align="left">25.5</td>
<td align="left">1</td>
<td align="left">2016-xx-xx</td>
<td align="left">NA</td>
<td align="left">1</td>
<td align="left">1.332</td>
<td align="left">3.4</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">49</td>
<td align="left">1972</td>
<td align="left">45-54</td>
<td align="left">24</td>
<td align="left">0</td>
<td align="left">2017-08-03</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">&lt;0.2</td>
<td align="left">2.1</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">70</td>
<td align="left">9999</td>
<td align="left">65-75</td>
<td align="left">28</td>
<td align="left">0</td>
<td align="left">2018-03-30</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">3.157</td>
<td align="left">5.6</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="left">1</td>
<td align="left"></td>
<td align="left">71</td>
<td align="left">1950</td>
<td align="left">65-75</td>
<td align="left">32</td>
<td align="left">0</td>
<td align="left"></td>
<td align="left">NA</td>
<td align="left">4</td>
<td align="left">4.203</td>
<td align="left">&lt;1.5</td>
<td align="left">nd</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">55</td>
<td align="left">1966</td>
<td align="left">55-64</td>
<td align="left">27</td>
<td align="left">0</td>
<td align="left">2016/12/04</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">0.619</td>
<td align="left">3.1</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">46</td>
<td align="left">1975</td>
<td align="left">45-54</td>
<td align="left">31</td>
<td align="left">0</td>
<td align="left">2016-06-26</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">9.866</td>
<td align="left">7.2</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">32</td>
<td align="left">1989</td>
<td align="left">25-34</td>
<td align="left">24</td>
<td align="left">NA</td>
<td align="left">2018-05-08</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">NA</td>
<td align="left">&lt;1.5</td>
<td align="left">Lab problems</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">72</td>
<td align="left">1949</td>
<td align="left">65-75</td>
<td align="left">29</td>
<td align="left">0</td>
<td align="left">2017-08-12</td>
<td align="left">NA</td>
<td align="left">4</td>
<td align="left">0.352</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">40</td>
<td align="left">1981</td>
<td align="left">35-44</td>
<td align="left">31</td>
<td align="left">1</td>
<td align="left">2016-11-27</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">1.28</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">28</td>
<td align="left">1993</td>
<td align="left">25-34</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">2017-12-28</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">1.073</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">72</td>
<td align="left">1949</td>
<td align="left">65-75</td>
<td align="left">29</td>
<td align="left">0</td>
<td align="left">2015-09-18</td>
<td align="left">NA</td>
<td align="left">1</td>
<td align="left">0.227</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">17</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">61</td>
<td align="left">1960</td>
<td align="left">55-64</td>
<td align="left">27</td>
<td align="left">0</td>
<td align="left">2017-10-06</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">5.113</td>
<td align="left">5.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">18</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">26</td>
<td align="left">0</td>
<td align="left"></td>
<td align="left">NA</td>
<td align="left">5</td>
<td align="left">0.508</td>
<td align="left">&lt;1.5</td>
<td align="left">na</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">52</td>
<td align="left">1969</td>
<td align="left">45-54</td>
<td align="left">26</td>
<td align="left">1</td>
<td align="left">2018-01-10</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">0.231</td>
<td align="left">1.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">73</td>
<td align="left">1948</td>
<td align="left">65-75</td>
<td align="left">29</td>
<td align="left">1</td>
<td align="left">2017-03-02</td>
<td align="left">NA</td>
<td align="left">4</td>
<td align="left">0.975</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">1</td>
<td align="left">Men</td>
<td align="left">54</td>
<td align="left">1967</td>
<td align="left">45-54</td>
<td align="left">26</td>
<td align="left">0</td>
<td align="left">2016-05-27</td>
<td align="left">NA</td>
<td align="left">2</td>
<td align="left">3.38</td>
<td align="left">&lt;1.5</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">1</td>
<td align="left">Women</td>
<td align="left">NA</td>
<td align="left">9999</td>
<td align="left">NULL</td>
<td align="left">28</td>
<td align="left">0</td>
<td align="left">2017-12-11</td>
<td align="left">NA</td>
<td align="left">3</td>
<td align="left">0.437</td>
<td align="left">&lt;1.5</td>
<td align="left">no birth date</td>
</tr>
</tbody>
</table>
</div>
<div id="application" class="section level2">
<h2>Application</h2>
<div id="an-example-on-error-afflicted-data" class="section level3">
<h3>An example on error afflicted data</h3>
<p>The application is straightforward, it requires data in data.frame format. It is important that all unusual missing values in the data, e.g. the code 9999 for missing values are covered. Values as NA, NaN, Inf, NULL and spaces are automatic considered as invalid (missing) values. The second column <code>type</code> is the estimated type of the variable, and the column <code>probability</code> indicates how certain the type is. The <code>format</code> gives additional information about the possible format of the variable, especially useful for date variables. <code>Class</code> is just a translation of type into broader categories.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">vtype</span>(sim_nqc_data, <span class="at">miss_values=</span><span class="st">&#39;9999&#39;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(tab, <span class="at">caption=</span><span class="st">&#39;Application example of vtype&#39;</span>)</span></code></pre></div>
<table>
<caption>Application example of vtype</caption>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">type</th>
<th align="right">probability</th>
<th align="left">format</th>
<th align="left">class</th>
<th align="left">alternative</th>
<th align="right">n</th>
<th align="right">missings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">ID</td>
<td align="right">0.906</td>
<td align="left"></td>
<td align="left">supportive</td>
<td align="left">continuous (4.8%)</td>
<td align="right">100</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">visit</td>
<td align="left">constant</td>
<td align="right">0.989</td>
<td align="left">1</td>
<td align="left">uninformative</td>
<td align="left">–</td>
<td align="right">98</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="left">binary</td>
<td align="right">0.961</td>
<td align="left">men/women</td>
<td align="left">qualitative</td>
<td align="left">text (3.2%)</td>
<td align="right">98</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">continuous</td>
<td align="right">1.000</td>
<td align="left">integer</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">92</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">byear</td>
<td align="left">date</td>
<td align="right">0.974</td>
<td align="left">%Y</td>
<td align="left">supportive</td>
<td align="left">continuous (2.6%)</td>
<td align="right">93</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">decades</td>
<td align="left">categorical</td>
<td align="right">0.565</td>
<td align="left">labels</td>
<td align="left">qualitative</td>
<td align="left">date (39.8%)</td>
<td align="right">92</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">bmi</td>
<td align="left">continuous</td>
<td align="right">0.999</td>
<td align="left">integer</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">92</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">med</td>
<td align="left">binary</td>
<td align="right">0.999</td>
<td align="left">0/1</td>
<td align="left">qualitative</td>
<td align="left">–</td>
<td align="right">95</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">date</td>
<td align="left">date</td>
<td align="right">1.000</td>
<td align="left">%Y-%m-%d</td>
<td align="left">supportive</td>
<td align="left">–</td>
<td align="right">97</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">loct</td>
<td align="left">missing</td>
<td align="right">1.000</td>
<td align="left"></td>
<td align="left">uninformative</td>
<td align="left">–</td>
<td align="right">0</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">group</td>
<td align="left">categorical</td>
<td align="right">0.978</td>
<td align="left">1-7</td>
<td align="left">qualitative</td>
<td align="left">continuous (2.1%)</td>
<td align="right">99</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">crp</td>
<td align="left">continuous</td>
<td align="right">1.000</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">96</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">bnp</td>
<td align="left">continuous</td>
<td align="right">0.997</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">95</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">comms</td>
<td align="left">text</td>
<td align="right">0.952</td>
<td align="left"></td>
<td align="left">supportive</td>
<td align="left">categorical (4.3%)</td>
<td align="right">10</td>
<td align="right">90</td>
</tr>
</tbody>
</table>
</div>
<div id="an-example-with-very-small-sample-size" class="section level3">
<h3>An example with very small sample size</h3>
<p>Very small sample size can reduce the prediction performance significantly. The <code>id</code> variable is now detected as integer, <code>age</code> as categorical and <code>decades</code> as a date variable.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">vtype</span>(sim_nqc_data[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]), <span class="at">caption=</span><span class="st">&#39;Application example with small sample size&#39;</span>)</span></code></pre></div>
<table>
<caption>Application example with small sample size</caption>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">type</th>
<th align="right">probability</th>
<th align="left">format</th>
<th align="left">class</th>
<th align="left">alternative</th>
<th align="right">n</th>
<th align="right">missings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">continuous</td>
<td align="right">0.517</td>
<td align="left">integer</td>
<td align="left">quantitative</td>
<td align="left">date (16.6%)</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">visit</td>
<td align="left">constant</td>
<td align="right">0.962</td>
<td align="left">1</td>
<td align="left">uninformative</td>
<td align="left">continuous (3.8%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">sex</td>
<td align="left">binary</td>
<td align="right">0.754</td>
<td align="left">men/women</td>
<td align="left">qualitative</td>
<td align="left">text (21.8%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">categorical</td>
<td align="right">0.441</td>
<td align="left">32-73</td>
<td align="left">qualitative</td>
<td align="left">continuous (42.3%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">byear</td>
<td align="left">date</td>
<td align="right">0.444</td>
<td align="left">?</td>
<td align="left">supportive</td>
<td align="left">continuous (32.4%)</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">decades</td>
<td align="left">date</td>
<td align="right">0.493</td>
<td align="left">?</td>
<td align="left">supportive</td>
<td align="left">categorical (40.9%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">bmi</td>
<td align="left">continuous</td>
<td align="right">0.595</td>
<td align="left">integer</td>
<td align="left">quantitative</td>
<td align="left">categorical (27.8%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">med</td>
<td align="left">binary</td>
<td align="right">0.965</td>
<td align="left">0/1</td>
<td align="left">qualitative</td>
<td align="left">continuous (3.5%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">date</td>
<td align="left">date</td>
<td align="right">0.999</td>
<td align="left">%Y-%m-%d</td>
<td align="left">supportive</td>
<td align="left">–</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">loct</td>
<td align="left">missing</td>
<td align="right">1.000</td>
<td align="left"></td>
<td align="left">uninformative</td>
<td align="left">–</td>
<td align="right">0</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">group</td>
<td align="left">categorical</td>
<td align="right">0.909</td>
<td align="left">1-4</td>
<td align="left">qualitative</td>
<td align="left">continuous (7.2%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">crp</td>
<td align="left">continuous</td>
<td align="right">0.640</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">text (17%)</td>
<td align="right">9</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">bnp</td>
<td align="left">continuous</td>
<td align="right">0.479</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">text (31.3%)</td>
<td align="right">10</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">comms</td>
<td align="left">text</td>
<td align="right">0.999</td>
<td align="left"></td>
<td align="left">supportive</td>
<td align="left">–</td>
<td align="right">4</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
</div>
<div id="an-example-on-data-without-errors" class="section level3">
<h3>An example on data without errors</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">vtype</span>(mtcars),  <span class="at">caption=</span><span class="st">&#39;Application example on data without errors&#39;</span>)</span></code></pre></div>
<table>
<caption>Application example on data without errors</caption>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">type</th>
<th align="right">probability</th>
<th align="left">format</th>
<th align="left">class</th>
<th align="left">alternative</th>
<th align="right">n</th>
<th align="right">missings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">mpg</td>
<td align="left">continuous</td>
<td align="right">1.000</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">cyl</td>
<td align="left">categorical</td>
<td align="right">0.966</td>
<td align="left">4-8</td>
<td align="left">qualitative</td>
<td align="left">continuous (3%)</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">disp</td>
<td align="left">continuous</td>
<td align="right">0.999</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">hp</td>
<td align="left">continuous</td>
<td align="right">1.000</td>
<td align="left">integer</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">drat</td>
<td align="left">continuous</td>
<td align="right">1.000</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">wt</td>
<td align="left">continuous</td>
<td align="right">0.998</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">qsec</td>
<td align="left">continuous</td>
<td align="right">0.999</td>
<td align="left">floating</td>
<td align="left">quantitative</td>
<td align="left">–</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">vs</td>
<td align="left">binary</td>
<td align="right">0.974</td>
<td align="left">0/1</td>
<td align="left">qualitative</td>
<td align="left">continuous (2.6%)</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">am</td>
<td align="left">binary</td>
<td align="right">0.974</td>
<td align="left">0/1</td>
<td align="left">qualitative</td>
<td align="left">continuous (2.6%)</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">gear</td>
<td align="left">categorical</td>
<td align="right">0.966</td>
<td align="left">3-5</td>
<td align="left">qualitative</td>
<td align="left">continuous (3%)</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">carb</td>
<td align="left">categorical</td>
<td align="right">0.967</td>
<td align="left">1-8</td>
<td align="left">qualitative</td>
<td align="left">continuous (3.1%)</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
